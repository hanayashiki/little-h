let t,e=0;const r=(t,e={},...r)=>"string"==typeof t?n(t,e,...s(r)):l(t,e,...s(r)),s=t=>t.map(t=>"string"==typeof t||"number"==typeof t||"boolean"==typeof t?o(String(t)):t),o=t=>({type:"Text",text:t,render:()=>document.createTextNode(t)}),n=(t,e={},...r)=>({tag:t,type:"HtmlElement",props:e,children:r,render(){const s=document.createElement(t);for(const t of r)t&&s.appendChild(t.render());return Object.keys(e).forEach(t=>{"ref"===t?e[t].current=s:t.startsWith("on")?s.addEventListener(t.slice(2).toLowerCase(),e[t]):s.setAttribute(t,e[t])}),s}}),l=(r,o={},...n)=>({type:"ComponentElement",props:o,slots:[],effects:[],children:s(n),render(){let s=t;e=0,t=this;const n=r(o);let l;try{l=n.render()}finally{this.effects.forEach(t=>window.requestIdleCallback(t)),t=s}return l},useSlot(){const t=e++;return t>=this.slots.length&&(this.slots[t]=void 0),{slot:this.slots[t],setSlot:e=>{this.slots[t]=e}}}}),c=e=>{const{slot:r,setSlot:s}=t.useSlot();if(void 0===r){const t={current:e};return s(t),t}return r},i=(e,r)=>{t.effects.push(e)};export{r as h,i as useEffect,c as useRef};
//# sourceMappingURL=index.modern.js.map
